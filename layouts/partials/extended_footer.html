<!--
To add an extended footer section, please create
`layouts/partials/extended_footer.html` in your Hugo directory.
-->

<script>
// Smooth animations for details/summary elements
document.addEventListener('DOMContentLoaded', function() {
  const allDetails = document.querySelectorAll('details');

  allDetails.forEach(details => {
    const summary = details.querySelector('summary');
    const content = details.querySelector(':scope > *:not(summary)');

    if (!summary || !content) return;

    summary.addEventListener('click', function(e) {
      e.preventDefault();

      const isOpen = details.hasAttribute('open');

      if (isOpen) {
        // Closing animation
        const startHeight = content.offsetHeight;
        details.style.height = startHeight + 'px';
        details.classList.add('is-animating');

        requestAnimationFrame(() => {
          requestAnimationFrame(() => {
            content.style.opacity = '0';
            content.style.transform = 'translateY(-20px)';
            details.style.height = '0px';

            setTimeout(() => {
              details.removeAttribute('open');
              details.classList.remove('is-animating');
              details.style.height = '';
              content.style.opacity = '';
              content.style.transform = '';
            }, 300);
          });
        });
      } else {
        // Opening animation
        details.setAttribute('open', '');
        const endHeight = content.offsetHeight;

        content.style.opacity = '0';
        content.style.transform = 'translateY(-20px)';
        details.style.height = '0px';
        details.classList.add('is-animating');

        requestAnimationFrame(() => {
          requestAnimationFrame(() => {
            content.style.opacity = '1';
            content.style.transform = 'translateY(0)';
            details.style.height = endHeight + 'px';

            setTimeout(() => {
              details.classList.remove('is-animating');
              details.style.height = '';
            }, 300);
          });
        });
      }
    });
  });
});
</script>
