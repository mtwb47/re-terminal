<!--
FediComment - Fediverse commenting system
To enable comments on a post, add this to your frontmatter:

fediverse:
  instance: "https://mastodon.social"
  id: "123456789012345678"
  username: "yourname"
-->

{{ if .Params.fediverse }}
<div class="fedicomment-section">
  <h2 style="color: var(--text-primary); margin-top: 3rem;">Comments</h2>
  <div id="fedicomment-container"></div>

  <script src="{{ "js/fedicomment.js" | absURL }}"></script>
  <script>
  document.addEventListener('DOMContentLoaded', function() {
    {{ with .Params.fediverse }}
    new FediComment({
      containerEl: '#fedicomment-container',
      instanceUrl: '{{ .instance }}',
      statusId: '{{ .id }}',
      username: '{{ .username }}',
      loadButtonText: 'Load Comments from Fediverse',
      replyButtonText: 'ðŸ’¬ Reply on Fediverse',
      noCommentsText: 'No comments yet. Be the first to reply on the Fediverse!',
      maxDepth: 10,
      dateFormat: 'relative'
    });
    {{ end }}
  });
  </script>
</div>
{{ end }}
